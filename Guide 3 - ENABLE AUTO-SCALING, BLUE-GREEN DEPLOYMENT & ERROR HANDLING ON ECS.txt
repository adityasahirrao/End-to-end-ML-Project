âœ… ENABLE AUTO-SCALING, BLUE-GREEN DEPLOYMENT & ERROR HANDLING ON ECS

ğŸ“Œ Prerequisites:
-----------------------
- Your ECS Fargate service is deployed and working
- You're using an Application Load Balancer (ALB)
- You want to scale based on CPU/Memory or target utilization

1ï¸. Enable Auto-Scaling for ECS Service
---------------------------------------
- Go to **ECS â†’ Clusters â†’ Your Cluster â†’ Services**
- Click your service (e.g. house-price-prediction-service)
- Actions â†’ **Auto Scaling â†’ Create**

ğŸ“Œ Set Auto Scaling Policy:
- Minimum tasks: 1  
- Maximum tasks: 3 (or more based on needs)

ğŸ¯ Scaling Policy:
- Target tracking
- Metric type: ECS Service Average CPU Utilization
- Target value: 50% (scale out when above 50%)

ğŸ’¡ Optional: Add memory-based scaling too

- Click "Create" â†’ Auto-scaling now active!

2ï¸. Implement Blue-Green Deployment (Canary Style)
---------------------------------------
- Go to **ECS â†’ Task Definitions â†’ Create New Revision** of your task
  - Update the image tag or env variable
  - Register new revision

- Go to **ECS â†’ Services â†’ Update**
  - Choose updated task definition revision
  - Deployment type: Rolling update or **Blue/Green via CodeDeploy** (for advanced)

ğŸ’¡ For Blue/Green:
- Set up **CodeDeploy App** + **Deployment Group**
- Connect ALB Listener rules for green and blue environments
- Use weighted routing for gradual rollout (e.g., 10% â†’ 50% â†’ 100%)

ğŸ¯ Alternative: Use GitHub Actions to trigger update with new revision

3ï¸. Add Custom Error Pages (Optional)
---------------------------------------
- Go to **EC2 â†’ Load Balancers â†’ Your ALB â†’ Listeners**
- Click HTTPS (443) â†’ Edit Rules

ğŸ“Œ Add fixed response rule:
- Condition: Path is `/not-found` or `/error`
- Action: Fixed Response
  - Status code: 404 or 500
  - Content-type: text/html
  - Message body: Custom HTML or message

ğŸ’¡ OR: Route errors to a separate Lambda or microservice

4ï¸. Monitor Health and Logs
---------------------------------------
- Go to **CloudWatch â†’ Logs**
  - Check ECS logs, task logs, ALB logs (enable in Load Balancer > Attributes)

- Enable Alerts:
  - Go to **CloudWatch Alarms**
  - Set CPU/Memory thresholds to get email/SMS alerts

âœ… You now have:
---------------------------------------
âœ”ï¸ Auto-scaling based on CPU/memory  
âœ”ï¸ Safer deployments via blue-green strategy  
âœ”ï¸ Custom error handling via ALB rules  
âœ”ï¸ Monitoring and alerts for full observability  
